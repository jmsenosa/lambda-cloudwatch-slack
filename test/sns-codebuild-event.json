{
  "Records": [
    {
      "EventSource": "aws:sns",
      "EventVersion": "1.0",
      "EventSubscriptionArn": "arn:aws:sns:ap-northeast-1:770905636989:Official-Alumni-CodeBuild-Updates:6d170655-dbe4-4edd-960a-fb43a35f2e62",
      "Sns": {
        "Type": "Notification",
        "MessageId": "d4585816-33f2-5f3c-8c67-0d7e5863deea",
        "TopicArn": "arn:aws:sns:ap-northeast-1:770905636989:Official-Alumni-CodeBuild-Updates",
        "Subject": null,
        "Message": "{\"version\":\"0\",\"id\":\"c4dc1303-ae65-e2d6-586b-51c6089250f7\",\"detail-type\":\"CodeBuild Build Phase Change\",\"source\":\"aws.codebuild\",\"account\":\"770905636989\",\"time\":\"2019-05-29T11:13:23Z\",\"region\":\"ap-northeast-1\",\"resources\":[\"arn:aws:codebuild:ap-northeast-1:770905636989:build/Sandbox-Official-Alumni-CI:238f9b32-cebf-40bb-9fe6-3d68f207c5e9\"],\"detail\":{\"completed-phase\":\"DOWNLOAD_SOURCE\",\"project-name\":\"Sandbox-Official-Alumni-CI\",\"build-id\":\"arn:aws:codebuild:ap-northeast-1:770905636989:build/Sandbox-Official-Alumni-CI:238f9b32-cebf-40bb-9fe6-3d68f207c5e9\",\"completed-phase-context\":\"[: ]\",\"additional-information\":{\"cache\":{\"type\":\"NO_CACHE\"},\"timeout-in-minutes\":60.0,\"build-complete\":false,\"initiator\":\"jmsenosa\",\"build-start-time\":\"May 29, 2019 11:13:14 AM\",\"source\":{\"buildspec\":\"version: 0.2\\nphases:\\n install:\\n   commands:\\n     - |\\n         runtime-versions:\\n            php: 7.1\\n         export DEBIAN_FRONTEND=noninteractive\\n         #Install php7.1\\n         apt-get update\\n         apt-get install -y  software-properties-common\\n         LC_ALL=C.UTF-8 add-apt-repository -y ppa:ondrej/php\\n         apt-get update\\n         # Install PHP\\n         apt-get install -y php7.1\\\\\\n                  php7.1-ldap \\\\\\n                  php7.1-xml \\\\\\n                  php7.1-xmlrpc \\\\\\n                  php7.1-zip \\\\\\n                  php7.1-mysql \\\\\\n                  php7.1-mbstring \\\\\\n                  php7.1-mcrypt \\\\\\n                  php7.1-gd \\\\\\n                  php7.1-readline \\\\\\n                  php7.1-opcache \\\\\\n                  php7.1-xdebug \\\\\\n                  php7.1-dom \\\\\\n                  php-xdebug \\\\\\n                  php7.1-curl \\\\\\n                  unzip\\n         #Enable xdebug - phpunit uses this for code coverage\\n         phpenmod xdebug\\n         #Install composer\\n         php -r \\\"copy('https://getcomposer.org/installer', 'composer-setup.php');\\\"\\n         php composer-setup.php ;\\n         php -r \\\"unlink('composer-setup.php');\\\" ;\\n         mv composer.phar /usr/local/bin/composer\\n         #Various handy node based dev tools - do you need these during your build? Comment if not.\\n         sudo apt-get install curl python-software-properties\\n         curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -\\n         sudo apt-get install nodejs\\n         node -v \\n         npm -v \\n         npm install -g gulp\\n         #npm install -g grunt\\n         #npm install -g webpack\\n     # Start Mysql if you need it\\n     #- apt-get install -y mysql-server\\n     #- su mysql -s /bin/bash -c \\\"/usr/sbin/mysqld\\\" &\\n build:\\n   commands:\\n     - echo Build started on `date`\\n     - echo Installing composer deps\\n     - composer install --no-interaction --no-progress --no-suggest\\n     - php artisan clear-compiled  \\n     - php artisan optimize\\n     - npm install  \\n     - echo Build completed on `date`\\n     - ls -lah\\n     - cp .env.example .env\\n     - gulp\\n     - composer dump-autoload\\n     - php artisan config:clear\\n     - php artisan config:cache\\n     - php artisan view:clear\\n\\n post_build:\\n   commands:\\n     # Do you need to do this? In many cases phpunit will use sqllite or similar to avoid the need for a real DB.\\n     # If you don't need it delete it\\n     # - /usr/bin/mysql  -u root -e \\\"GRANT ALL ON *.* TO 'user'@'localhost' IDENTIFIED BY '' WITH GRANT OPTION\\\"\\n     # - mysqladmin -u user create official-alumni.com\\n     # - /usr/bin/mysql -u user official-alumni.com < db_dump/official-alumni.sql\\n     # - php artisan migrate\\n     - ./vendor/bin/phpunit\",\"location\":\"https://github.com/hackazouk-inc/official-alumni.git\",\"type\":\"GITHUB\"},\"artifact\":{\"location\":\"arn:aws:s3:::sandbox-official-alumni-codebuild/238f9b32-cebf-40bb-9fe6-3d68f207c5e9/Sandbox-Official-Alumni-CI\"},\"environment\":{\"image\":\"aws/codebuild/php:7.1-1.7.0\",\"privileged-mode\":false,\"image-pull-credentials-type\":\"CODEBUILD\",\"compute-type\":\"BUILD_GENERAL1_SMALL\",\"type\":\"LINUX_CONTAINER\",\"environment-variables\":[]},\"logs\":{\"group-name\":\"/aws/codebuild/Sandbox-Official-Alumni-CI\",\"stream-name\":\"238f9b32-cebf-40bb-9fe6-3d68f207c5e9\",\"deep-link\":\"https://console.aws.amazon.com/cloudwatch/home?region=ap-northeast-1#logEvent:group=/aws/codebuild/Sandbox-Official-Alumni-CI;stream=238f9b32-cebf-40bb-9fe6-3d68f207c5e9\"},\"phases\":[{\"phase-context\":[],\"start-time\":\"May 29, 2019 11:13:14 AM\",\"end-time\":\"May 29, 2019 11:13:15 AM\",\"duration-in-seconds\":1.0,\"phase-type\":\"SUBMITTED\",\"phase-status\":\"SUCCEEDED\"},{\"phase-context\":[],\"start-time\":\"May 29, 2019 11:13:15 AM\",\"end-time\":\"May 29, 2019 11:13:15 AM\",\"duration-in-seconds\":0.0,\"phase-type\":\"QUEUED\",\"phase-status\":\"SUCCEEDED\"},{\"phase-context\":[\": \"],\"start-time\":\"May 29, 2019 11:13:15 AM\",\"end-time\":\"May 29, 2019 11:13:23 AM\",\"duration-in-seconds\":7.0,\"phase-type\":\"PROVISIONING\",\"phase-status\":\"SUCCEEDED\"},{\"phase-context\":[\": \"],\"start-time\":\"May 29, 2019 11:13:23 AM\",\"end-time\":\"May 29, 2019 11:13:30 AM\",\"duration-in-seconds\":7.0,\"phase-type\":\"DOWNLOAD_SOURCE\",\"phase-status\":\"SUCCEEDED\"},{\"start-time\":\"May 29, 2019 11:13:30 AM\",\"phase-type\":\"INSTALL\"}],\"queued-timeout-in-minutes\":480.0},\"completed-phase-status\":\"SUCCEEDED\",\"completed-phase-duration-seconds\":7.0,\"version\":\"1\",\"completed-phase-start\":\"May 29, 2019 11:13:23 AM\",\"completed-phase-end\":\"May 29, 2019 11:13:30 AM\"}}",
        "Timestamp": "2019-05-29T11:13:21.826Z",
        "SignatureVersion": "1",
        "Signature": "IpnP3iqsTko6a7Zj42wTC2/JyweQql+kuDI5xpyfWlzqRus6qfSIBPMNBUgnhURNJivAMa3uesmg+UrICMaM4dfyYOL2fQ6M8rmjrQdf8sqPyimZFLe7jPHuVtaZXF3t+hb41w3I8E9+ozhqMz65AYMnnK5WXnY23V9+nNYRUl7Y9kBNFVGgbhowjiqzQb7xhYhA5NkZjHnUdsQEjCtK0qJjZmPGllnXxC3Bu3AiKoPLVnUDj6Ly6lR4KPurAIXIVH6EG2S+K8vOTsXicsnkVJlfKGhgBJi7/xfOmE/SrKw2lXIGxjrAsK15vAfxQpOJMq1iQCPMark4aWE2F+WDOg==",
        "SigningCertUrl": "https://sns.ap-northeast-1.amazonaws.com/SimpleNotificationService-6aad65c2f9911b05cd53efda11f913f9.pem",
        "UnsubscribeUrl": "https://sns.ap-northeast-1.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:ap-northeast-1:770905636989:Official-Alumni-CodeBuild-Updates:6d170655-dbe4-4edd-960a-fb43a35f2e62",
        "MessageAttributes": {}
      }
    }
  ]
}
